<!DOCTYPE html>
<head>
    <title>OAuth Authentication in HTML</title>
	<script src="https://cdn.jsdelivr.net/gh/jquery/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="./config.js"></script>
    <script src="./app.js"></script>
</head>
<body>
    <script>
        var clientid="d04bdbb5e"+"b450cfa7b35"
        var secret="4098f45d39ca872e244"+"0dca1c1b4d1d9fe211d2e";

        if ($_GET["code"]!=undefined) {
            console.log($_GET["code"]);
            var url="https://github.com/login/oauth/access_token";
	    var data={client_id:clientid,client_secret:secret,code:$_GET["code"]};
            var content=SendAjax(url,"GET",JSON.stringify(data),{Accept:"application/json"});
            if (content==null) {
                console.log("Failed to get user access token!");
                exit();
            }
            console.log(content);
        }
        else {
            var url="https://github.com/login/oauth/authorize?client_id="+clientid+"&scope=user";
            location.replace(url);
        }
    </script>
</body>
